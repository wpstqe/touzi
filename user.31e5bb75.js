(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"10d2":function(e,s,t){},"1f06":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"basic_wrap"},[s("bsHeader",{attrs:{title:e.$t("user.passwordChange")},on:{backurl:function(s){return e.$router.back()}}}),s("div",{staticClass:"desc_warp"},[s("van-form",{attrs:{"label-width":"115px"},on:{submit:e.onSubmit}},[s("van-field",{attrs:{name:"password",type:e.passwordType,label:e.$t("user.old_password"),placeholder:e.$t("user.old_password"),rules:[{required:!0,message:e.$t("user.input_old_password")}]},model:{value:e.form.password,callback:function(s){e.$set(e.form,"password",s)},expression:"form.password"}},[s("template",{slot:"right-icon"},[s("span",{staticClass:"solts",on:{click:function(s){return e.switchPasswordType("password")}}},["password"===e.passwordType?s("van-icon",{attrs:{name:"eye"}}):s("van-icon",{attrs:{name:"closed-eye"}})],1)])],2),s("van-field",{attrs:{type:e.new_passwordType,name:"new_password",label:e.$t("user.new_password"),placeholder:e.$t("user.new_password"),rules:[{required:!0,message:e.$t("user.input_new_password")}]},model:{value:e.form.new_password,callback:function(s){e.$set(e.form,"new_password",s)},expression:"form.new_password"}},[s("template",{slot:"right-icon"},[s("span",{staticClass:"solts",on:{click:function(s){return e.switchPasswordType("new_password")}}},["password"===e.new_passwordType?s("van-icon",{attrs:{name:"eye"}}):s("van-icon",{attrs:{name:"closed-eye"}})],1)])],2),s("van-field",{attrs:{type:e.re_new_passwordType,name:"re_new_password",label:e.$t("user.re_new_password"),placeholder:e.$t("user.re_new_password"),rules:[{required:!0,message:e.$t("user.input_re_new_password")}]},model:{value:e.form.re_new_password,callback:function(s){e.$set(e.form,"re_new_password",s)},expression:"form.re_new_password"}},[s("template",{slot:"right-icon"},[s("span",{staticClass:"solts",on:{click:function(s){return e.switchPasswordType("re_new_password")}}},["password"===e.re_new_passwordType?s("van-icon",{attrs:{name:"eye"}}):s("van-icon",{attrs:{name:"closed-eye"}})],1)])],2),s("div",{staticStyle:{margin:"16px"}},[s("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" "+e._s(e.$t("utils.submit"))+" ")])],1)],1)],1)],1)},a=[],n=(t("14d9"),t("2b0e")),o=t("1c1e"),i=t("b5c7"),d=t("d282"),l=t("db85"),u=Object(d["a"])("form"),c=u[0],p=u[1],w=c({props:{colon:Boolean,disabled:Boolean,readonly:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,errorMessageAlign:String,submitOnEnter:{type:Boolean,default:!0},validateTrigger:{type:String,default:"onBlur"},showError:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0}},provide:function(){return{vanForm:this}},data:function(){return{fields:[]}},methods:{getFieldsByNames:function(e){return e?this.fields.filter((function(s){return-1!==e.indexOf(s.name)})):this.fields},validateSeq:function(e){var s=this;return new Promise((function(t,r){var a=[],n=s.getFieldsByNames(e);n.reduce((function(e,s){return e.then((function(){if(!a.length)return s.validate().then((function(e){e&&a.push(e)}))}))}),Promise.resolve()).then((function(){a.length?r(a):t()}))}))},validateFields:function(e){var s=this;return new Promise((function(t,r){var a=s.getFieldsByNames(e);Promise.all(a.map((function(e){return e.validate()}))).then((function(e){e=e.filter((function(e){return e})),e.length?r(e):t()}))}))},validate:function(e){return e&&!Array.isArray(e)?this.validateField(e):this.validateFirst?this.validateSeq(e):this.validateFields(e)},validateField:function(e){var s=this.fields.filter((function(s){return s.name===e}));return s.length?new Promise((function(e,t){s[0].validate().then((function(s){s?t(s):e()}))})):Promise.reject()},resetValidation:function(e){e&&!Array.isArray(e)&&(e=[e]);var s=this.getFieldsByNames(e);s.forEach((function(e){e.resetValidation()}))},scrollToField:function(e,s){this.fields.some((function(t){return t.name===e&&(t.$el.scrollIntoView(s),!0)}))},addField:function(e){this.fields.push(e),Object(l["a"])(this.fields,this)},removeField:function(e){this.fields=this.fields.filter((function(s){return s!==e}))},getValues:function(){return this.fields.reduce((function(e,s){return e[s.name]=s.formValue,e}),{})},onSubmit:function(e){e.preventDefault(),this.submit()},submit:function(){var e=this,s=this.getValues();this.validate().then((function(){e.$emit("submit",s)})).catch((function(t){e.$emit("failed",{values:s,errors:t}),e.scrollToError&&e.scrollToField(t[0].name)}))}},render:function(){var e=arguments[0];return e("form",{class:p(),on:{submit:this.onSubmit}},[this.slots()])}}),f=t("565f"),h=t("b650"),m=t("ad06");n["a"].use(w).use(f["a"]).use(h["a"]).use(m["a"]);var _={name:"Password",components:{bsHeader:i["a"]},data(){return{form:{password:"",new_password:"",re_new_password:""},passwordType:"password",new_passwordType:"password",re_new_passwordType:"password"}},created(){window.plus&&(window.plus.navigator.setStatusBarBackground("#FFFFFF"),window.plus.navigator.setStatusBarStyle("dark")),this.$parent.footer("user",!1)},mounted(){},methods:{switchPasswordType(e){this[e+"Type"]="password"===this[e+"Type"]?"text":"password"},onSubmit(){this.form.password===this.form.new_password?this.$toast(this.$t("user.newPasswordWarning")):this.form.new_password!==this.form.re_new_password?this.$toast(this.$t("login.repasswordError")):Object(o["a"])("/user/password",{password:this.form.password,new_password:this.form.new_password,re_new_password:this.form.re_new_password,language:localStorage.getItem("lang")||"en_us"}).then(e=>{1===e.code&&this.recharge()}).catch(()=>{})},recharge(){this.$toast({message:this.$t("user.passwordChangeSuccess"),duration:3e3,onClose:()=>{this.$router.push({path:"/user"})}})}}},v=_,g=(t("6db7"),t("2877")),b=Object(g["a"])(v,r,a,!1,null,"29271fdd",null);s["default"]=b.exports},"6db7":function(e,s,t){"use strict";t("10d2")}}]);
//# sourceMappingURL=user.31e5bb75.js.map